<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Bases de Impro</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 750px; margin: 0 auto; background-color: #f4f7f6; }
        h1 { color: #8B4513; border-bottom: 2px solid #8B4513; padding-bottom: 10px; }
        button { padding: 12px 20px; background-color: #8B4513; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; transition: background-color 0.3s; }
        button:hover { background-color: #65340f; }
        #resultado { margin-top: 25px; padding: 25px; border: 1px solid #8B4513; background-color: #f8f0e3; border-radius: 8px; min-height: 120px; }
        .titulo-seccion { font-size: 1.2em; font-weight: bold; margin-top: 15px; color: #555; }
        .respuesta { font-size: 1.4em; color: #000; margin-bottom: 5px; line-height: 1.3; }
        .opcion-lugar { padding: 8px 0; border-left: 3px solid #f90; padding-left: 10px; margin-top: 8px; }
        .opcion-lugar strong { color: #f90; margin-right: 5px; }
        .api-warning { color: red; margin-top: 15px; font-size: 0.9em; border: 1px solid red; padding: 10px; background-color: #fee; }
        .cargando { color: #8B4513; font-weight: bold; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <h1>Bases de Impro 游눠</h1>
    
    <button onclick="generarImpro()">Nueva Base de Escena</button>
    
    <div id="resultado"></div>

    
    <script>
        // --- CLAVE API Y CONFIGURACI칍N ---
        // 춰ADVERTENCIA! Reemplaza 'AIzaSyBkw_hSk8yJdruIH-mOPWTvd4v7qVh-EyQ' con tu CLAVE API real
        const API_KEY = 'AIzaSyBkw_hSk8yJdruIH-mOPWTvd4v7qVh-EyQ'; 
        const MODEL_NAME = 'gemini-2.5-flash';
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${API_KEY}`;

        // Funci칩n para construir el PROMPT detallado y MEJORADO
        function construirPrompt() {
            const rol = `
                **ROL:** Eres un **Maestro de Ceremonias de Improvisaci칩n** experto en generar detonantes de escena de alto potencial dram치tico y c칩mico. Tu 칰nica funci칩n es crear una base de escena siguiendo instrucciones estrictas.
            `;

            const reglas = `
                **REGLAS DE CONTENIDO:**
                1.  **쯈ui칠nes son?:** Debe ser una **relaci칩n o v칤nculo conflictivo/interesante** entre **2 o 3 personajes**. Incluye su ocupaci칩n, relaci칩n familiar o un rasgo de personalidad clave (ej: Dos rivales que han tenido un accidente, Un padre ultraconservador y su hija que acaba de tatuarse). **IMPORTANTE: Evita repetir temas o tipos de personajes recurrentes como inspectores de sanidad, cocineros, o hermanos.**
                2.  **쮻칩nde est치n? (Opci칩n Surrealista):** Un lugar **totalmente absurdo, m치gico o imposible** que fuerce la aceptaci칩n de una realidad completamente nueva (ej: En la dimensi칩n donde viven los recuerdos olvidados, En el interior de un motor de reacci칩n a punto de encenderse).
                3.  **쮻칩nde est치n? (Opci칩n Mundana con Giro C칩mico/Realista):** Un lugar cotidiano, pero que contenga una **complicaci칩n divertida, socialmente inc칩moda o un problema rid칤culo, pero totalmente plausible en la vida real** (ej: En un restaurante caro y tienen la cartera olvidada, En una reuni칩n familiar donde todos deben llevar un sombrero rid칤culo).
                4.  **쮻칩nde est치n? (Opci칩n Mundana Aburrida):** Un lugar **extremadamente com칰n, neutral y sin ning칰n giro o conflicto inicial**. Evita lugares ya usados en el resto de opciones (ej: En la cola para pagar en el supermercado, En una parada de autob칰s vac칤a, En un pasillo de oficina).
            `;

            const formato = `
                **FORMATO ESTRICTO DE SALIDA:**
                Debes responder **EXCLUSIVAMENTE** con **cuatro** l칤neas de texto. **No incluyas NINGUNA otra explicaci칩n, encabezado, introducci칩n, o despedida.**

                L칤nea 1: Qui칠nes son: [Relaci칩n de 2-3 personajes, concisa y con gancho]
                L칤nea 2: D칩nde est치n (Surrealista): [Lugar absurdo o imposible]
                L칤nea 3: D칩nde est치n (Mundana con Giro C칩mico/Realista): [Lugar com칰n con un giro divertido y realista]
                L칤nea 4: D칩nde est치n (Mundana Aburrida): [Lugar extremadamente com칰n, neutral y sin gancho]
            `;

            // 50 EJEMPLOS AMPLIADOS
            const ejemplos = [
                // Ejemplos originales
                "Ejemplo 1:\nQui칠nes son: Dos inspectores de sanidad muy serios.\nD칩nde est치n (Surrealista): Dentro de un calcet칤n sucio gigante, donde las pelusas son monta침as.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En el probador de una tienda de ropa infantil de lujo, probando ropa para un beb칠 y uno de ellos se ha quedado atascado con un mono.\nD칩nde est치n (Mundana Aburrida): En un ascensor que sube lentamente al piso 3.",
                "Ejemplo 2:\nQui칠nes son: Una madre y su hijo adolescente que discuten por las notas.\nD칩nde est치n (Surrealista): En la luna, intentando encontrar cobertura.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una boda, en la que la madre ha confundido al novio con el camarero.\nD칩nde est치n (Mundana Aburrida): En un parking subterr치neo, buscando el coche.",
                "Ejemplo 3:\nQui칠nes son: Tres compa침eros de trabajo que acaban de ganar la loter칤a.\nD칩nde est치n (Surrealista): Cruzando un desierto donde el suelo es gelatina.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En la secci칩n de comida congelada de un supermercado, en pleno verano, fingiendo que no se conocen para no repartir el premio.\nD칩nde est치n (Mundana Aburrida): En la sala de espera de un m칠dico, esperando un turno.",
                // 4-50 Ejemplos nuevos y variados
                "Ejemplo 4:\nQui칠nes son: Un vendedor de biblias a domicilio y su cliente, un ateo militante.\nD칩nde est치n (Surrealista): En el interior de un reloj de cuco gigante a punto de dar las doce.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En la sala de espera de un tatuador, donde el vendedor ha ido por error a vender biblias.\nD칩nde est치n (Mundana Aburrida): En un banco del parque, mirando a la nada.",
                "Ejemplo 5:\nQui칠nes son: Una abuela aficionada a la jardiner칤a y un ladr칩n de obras de arte torpe.\nD칩nde est치n (Surrealista): Flotando en el t칠 de la tarde de un gigante.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un ascensor donde el ladr칩n intenta escapar con un cuadro y la abuela insiste en ense침arle fotos de sus nietos.\nD칩nde est치n (Mundana Aburrida): En una cabina de tel칠fono sin cobertura.",
                "Ejemplo 6:\nQui칠nes son: El director de un colegio y la mascota del equipo rival, disfrazado.\nD칩nde est치n (Surrealista): En un laberinto hecho de libros de texto prohibidos.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un jacuzzi de un hotel de cinco estrellas, en plena reuni칩n de padres y profesores.\nD칩nde est치n (Mundana Aburrida): En la lavander칤a comunitaria, esperando que la secadora termine.",
                "Ejemplo 7:\nQui칠nes son: Dos astr칩nomos que han descubierto que la Tierra es plana.\nD칩nde est치n (Surrealista): En el borde de la Tierra plana, mirando hacia el abismo.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una cafeter칤a, discutiendo el hallazgo y sin saber c칩mo pagar la cuenta con su nueva perspectiva de la realidad.\nD칩nde est치n (Mundana Aburrida): En una parada de taxis lloviendo a c치ntaros.",
                "Ejemplo 8:\nQui칠nes son: Una cr칤tica de cine de culto y su ex-marido, un actor de telenovelas.\nD칩nde est치n (Surrealista): En un decorado de cine en blanco y negro, donde todo lo que tocan se vuelve color.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En la cola para comprar entradas para el estreno de una pel칤cula mala del ex-marido, intentando pasar desapercibidos.\nD칩nde est치n (Mundana Aburrida): En un pasillo de oficina, esperando una reuni칩n.",
                "Ejemplo 9:\nQui칠nes son: Un cazador de mitos y una criatura mitol칩gica que est치 cansada de ser cazada.\nD칩nde est치n (Surrealista): En un cielo hecho de nubes de az칰car.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una reuni칩n de Alcoh칩licos An칩nimos, donde el cazador se ha confundido de grupo.\nD칩nde est치n (Mundana Aburrida): En la zona de paqueter칤a de correos, intentando enviar un paquete fr치gil.",
                "Ejemplo 10:\nQui칠nes son: Dos jugadores de ajedrez muy competitivos, en la vida real enemigos jurados.\nD칩nde est치n (Surrealista): Dentro de una pieza de ajedrez, debatiendo qui칠n tiene la culpa de la partida.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un gimnasio, intentando hacer ejercicio mientras se lanzan pullas sobre sus estrategias.\nD칩nde est치n (Mundana Aburrida): En el portal de un edificio, esperando que pase la lluvia.",
                "Ejemplo 11:\nQui칠nes son: Una mujer que acaba de descubrir que su marido es un clon.\nD칩nde est치n (Surrealista): En el laboratorio de clones, decidiendo a qu칠 clon se queda.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En el cumplea침os de su suegra, intentando que el clon no revele su secreto delante de toda la familia.\nD칩nde est치n (Mundana Aburrida): En un autob칰s nocturno, sin gente y haciendo un ruido extra침o.",
                "Ejemplo 12:\nQui칠nes son: Dos bibliotecarios, uno fan치tico del silencio y el otro de la m칰sica a todo volumen.\nD칩nde est치n (Surrealista): En una cueva donde el eco es el 칰nico sonido permitido.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un concierto de m칰sica cl치sica, donde el ruidoso se ha quedado dormido y est치 roncando.\nD칩nde est치n (Mundana Aburrida): En el dep칩sito de objetos perdidos, intentando clasificar unos calcetines.",
                "Ejemplo 13:\nQui칠nes son: El l칤der de una secta y su seguidor m치s fiel que empieza a dudar.\nD칩nde est치n (Surrealista): En la cima de una monta침a de donuts.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una tienda de animales, donde el l칤der est치 intentando convencer al seguidor de que el hamster es un profeta.\nD칩nde est치n (Mundana Aburrida): En un paso de cebra, esperando que el sem치foro cambie.",
                "Ejemplo 14:\nQui칠nes son: Un hipocondr칤aco y su m칠dico de cabecera, que acaba de jubilarse.\nD칩nde est치n (Surrealista): En el sistema digestivo de una ballena, buscando una cura para un resfriado imaginario.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un supermercado, donde el hipocondr칤aco intenta autodiagnosticarse mirando etiquetas nutricionales.\nD칩nde est치n (Mundana Aburrida): En un museo de cera, en la sala de figuras hist칩ricas.",
                "Ejemplo 15:\nQui칠nes son: Dos camareros que odian su trabajo y acaban de ser ascendidos.\nD칩nde est치n (Surrealista): En una m치quina de caf칠 que prepara la bebida del destino.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un spa, intentando relajarse, pero siguen tomando pedidos de toallas y batas.\nD칩nde est치n (Mundana Aburrida): En la sala de profesores de una academia de idiomas, esperando al siguiente alumno.",
                "Ejemplo 16:\nQui칠nes son: Un experto en modales y un b치rbaro reci칠n llegado a la civilizaci칩n.\nD칩nde est치n (Surrealista): En un pozo de los deseos que solo concede deseos ir칩nicos.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una cena elegante, donde el b치rbaro est치 intentando usar los cubiertos de manera incorrecta.\nD칩nde est치n (Mundana Aburrida): En la recepci칩n de un hotel, esperando las llaves de la habitaci칩n.",
                "Ejemplo 17:\nQui칠nes son: Un ladr칩n que intenta redimirse y el polic칤a que lo persigue desde hace a침os.\nD칩nde est치n (Surrealista): En un banco donde el dinero son palabras de aliento.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una clase de yoga, donde el ladr칩n est치 intentando robar una cartera sin hacer ruido.\nD칩nde est치n (Mundana Aburrida): En una parada de metro, esperando el tren.",
                "Ejemplo 18:\nQui칠nes son: Una mujer que habla con las plantas y su vecina esc칠ptica.\nD칩nde est치n (Surrealista): En un bosque donde los 치rboles hablan por un meg치fono.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una terraza de un bar, donde la mujer est치 rega침ando a una maceta por no florecer.\nD칩nde est치n (Mundana Aburrida): En una cola de espera para entrar a un cine.",
                "Ejemplo 19:\nQui칠nes son: Dos cr칤ticos de arte que en secreto no tienen ni idea de arte.\nD칩nde est치n (Surrealista): En una galer칤a de arte flotando en el espacio.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una subasta de arte, intentando pujar por una obra y no saben qu칠 significan los n칰meros.\nD칩nde est치n (Mundana Aburrida): En un pasillo de hospital, esperando noticias.",
                "Ejemplo 20:\nQui칠nes son: Un mago de fiestas infantiles cuyo conejo ha desaparecido y un detective de mascotas.\nD칩nde est치n (Surrealista): En la chistera del mago, buscando al conejo.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una comisar칤a, intentando denunciar la desaparici칩n del conejo sin revelar el secreto del truco.\nD칩nde est치n (Mundana Aburrida): En un portal con un portero autom치tico estropeado.",
                "Ejemplo 21:\nQui칠nes son: Un padre que intenta grabar un TikTok con su hijo adolescente que odia las redes sociales.\nD칩nde est치n (Surrealista): En el interior de un meme viral.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una tienda de ropa 'vintage', intentando encontrar un atuendo para el v칤deo.\nD칩nde est치n (Mundana Aburrida): En un puente peatonal, mirando el tr치fico.",
                "Ejemplo 22:\nQui칠nes son: Dos vampiros que odian la oscuridad y solo salen de d칤a.\nD칩nde est치n (Surrealista): En un parque tem치tico de luz solar.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una cabina de bronceado, discutiendo si el factor de protecci칩n solar es suficiente.\nD칩nde est치n (Mundana Aburrida): En la cola para comprar helados en pleno agosto.",
                "Ejemplo 23:\nQui칠nes son: Un profesor de gimnasia muy estricto y una alumna que no puede dejar de comer snacks.\nD칩nde est치n (Surrealista): Dentro de una dona gigante en un mundo de dulces.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un refugio antia칠reo, donde solo tienen snacks como provisiones.\nD칩nde est치n (Mundana Aburrida): En la puerta de un cine, esperando a que salgan sus amigos.",
                "Ejemplo 24:\nQui칠nes son: Un ladr칩n de bicicletas y el due침o de la bicicleta, que es un famoso ciclista.\nD칩nde est치n (Surrealista): En una carrera de bicicletas voladoras.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una tienda de bicicletas, donde el ladr칩n intenta vender la bici robada a su due침o.\nD칩nde est치n (Mundana Aburrida): En una oficina de objetos perdidos del aeropuerto.",
                "Ejemplo 25:\nQui칠nes son: Un arque칩logo y su ayudante, que creen que han encontrado el objeto m치s aburrido de la historia.\nD칩nde est치n (Surrealista): En un museo de objetos aburridos que cobran vida.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un programa de televisi칩n de venta a domicilio, intentando vender el objeto aburrido como una reliquia.\nD칩nde est치n (Mundana Aburrida): En el and칠n de una estaci칩n de tren, esperando el 칰ltimo tren del d칤a.",
                "Ejemplo 26:\nQui칠nes son: Dos agentes de seguros que compiten por el 'Cliente del A침o'.\nD칩nde est치n (Surrealista): En un mundo donde todo est치 asegurado, incluso el aire que respiran.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En la fiesta de cumplea침os de un cliente, intentando venderle una p칩liza de vida en medio de la tarta.\nD칩nde est치n (Mundana Aburrida): En la terraza de un bar, esperando que el camarero les atienda.",
                "Ejemplo 27:\nQui칠nes son: Un cr칤tico gastron칩mico con un paladar terrible y el chef que odia.\nD칩nde est치n (Surrealista): En la despensa de un duende, donde los ingredientes son ilusiones.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un curso de cata de vinos car칤simos, donde el cr칤tico no distingue el vino del zumo de naranja.\nD칩nde est치n (Mundana Aburrida): En una callejuela, buscando una direcci칩n en el GPS.",
                "Ejemplo 28:\nQui칠nes son: Un inventor de objetos in칰tiles y su inversor, que quiere resultados.\nD칩nde est치n (Surrealista): En una f치brica de ideas que no se pueden patentar.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una presentaci칩n a inversores, donde el invento es un paraguas con fugas.\nD칩nde est치n (Mundana Aburrida): En un coche aparcado, esperando a alguien que llega tarde.",
                "Ejemplo 29:\nQui칠nes son: Dos jubilados que se conocen en un chat de citas para j칩venes.\nD칩nde est치n (Surrealista): En un parque donde los 치rboles dan consejos amorosos.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una discoteca de moda, intentando bailar reggaet칩n sin romperse la cadera.\nD칩nde est치n (Mundana Aburrida): En la sala de espera de un pod칩logo.",
                "Ejemplo 30:\nQui칠nes son: Un adivino que no acierta ni una y un cliente que cree ciegamente en 칠l.\nD칩nde est치n (Surrealista): En el futuro, que no se parece en nada a lo que el adivino predijo.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un gimnasio, donde el adivino est치 intentando predecir el siguiente movimiento de pesas.\nD칩nde est치n (Mundana Aburrida): En la caja de un peaje, pagando con monedas.",
                "Ejemplo 31:\nQui칠nes son: Un superh칠roe que solo tiene el poder de encender y apagar las luces y su fiel sidekick.\nD칩nde est치n (Surrealista): En un universo donde la luz es el 칰nico enemigo.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un cine, donde el superh칠roe intenta apagar la luz para que empiece la pel칤cula.\nD칩nde est치n (Mundana Aburrida): En una oficina de correos, intentando recoger una carta certificada.",
                "Ejemplo 32:\nQui칠nes son: Un director de orquesta obsesionado con el silencio y un m칰sico con un instrumento muy ruidoso.\nD칩nde est치n (Surrealista): En un mundo hecho de notas musicales que explotan al tocarlas.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En una biblioteca, donde el m칰sico est치 intentando ensayar con un tromb칩n.\nD칩nde est치n (Mundana Aburrida): En una sala de conferencias antes de que empiece el evento.",
                "Ejemplo 33:\nQui칠nes son: Un instructor de supervivencia que nunca ha salido de la ciudad y su alumno, un ni침o de 10 a침os.\nD칩nde est치n (Surrealista): En un bosque de plastilina, donde los animales son de goma.\nD칩nde est치n (Mundana con Giro C칩mico/Realista): En un camping de lujo, intentando encender un fuego con piedras.\nD칩nde est치n
