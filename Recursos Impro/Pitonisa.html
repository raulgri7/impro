<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pitonisa y Mimo (Generador de Imprvs.)</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 750px; margin: 0 auto; background-color: #fff7e6; }
        h1 { color: #8430ce; border-bottom: 2px solid #8430ce; padding-bottom: 10px; margin-bottom: 30px; }
        p.instruccion { color: #5f6368; margin-bottom: 25px; }
        
        button { 
            padding: 14px 25px; 
            background-color: #8430ce; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 18px; 
            font-weight: bold;
            transition: background-color 0.3s, transform 0.1s; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
        }
        button:hover { background-color: #6a1b9a; }
        button:active { transform: translateY(2px); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        #resultado { 
            margin-top: 35px; 
            padding: 25px; 
            border: 2px solid #8430ce; 
            background-color: #f3e5f5;
            border-radius: 10px; 
            min-height: 150px; 
            white-space: pre-wrap; 
            font-size: 1.15em; 
        }
        pre { 
            font-family: inherit; 
            margin: 0; 
            padding: 0; 
            white-space: pre-wrap; 
            line-height: 1.8; 
            font-weight: bold; 
        }
        .cargando { color: #8430ce; font-weight: bold; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <h1>üîÆ La Pitonisa y el Mimo</h1>
    <p class="instruccion"></p>
    
    <button onclick="generarPredicciones()">¬° Predicci√≥n !</button>
    
    <div id="resultado"></div>


    <script>
        // ----------------------------------------------------------
        // --- CLAVE API Y CONFIGURACI√ìN ---
        // ----------------------------------------------------------
        const API_KEY = 'AIzaSyBkw_hSk8yJdruIH-mOPWTvd4v7qVh-EyQ'; // ¬°RECUERDA SUSTITUIR ESTO!
        const MODEL_NAME = 'gemini-2.5-flash';
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${API_KEY}`;


        // Funci√≥n para construir el PROMPT detallado y mejorado
        function construirPromptPitonisa() {
            const contexto = `Eres un experto en teatro de improvisaci√≥n y generas ideas para un juego de Pitonisa (adivina) y Mimo (asistente). Debes generar EXACTAMENTE SEIS pares de preguntas y respuestas.

REQUISITOS CLAVE:
1. La PREGUNTA debe ser simple, com√∫n y cotidiana (ej: "¬øCu√°l es mi destino?").
2. La RESPUESTA debe ser una **√∫nica imagen o acci√≥n absurda**, enrevesada y contener **elementos f√≠sicos muy simples y claramente representables con m√≠mica**. Est√° totalmente prohibido usar frases que concatenen acciones o condiciones (ej: NO USAR "mientras haces X", "y luego Y", "despu√©s de Z").
3. El formato de la respuesta debe ser: "Pregunta: [Pregunta Simple]\nRespuesta: [Predicci√≥n Absurda/Mimeable]".

No a√±adas NING√öN otro texto, explicaciones, introducciones, encabezados, despedidas o comentarios. Solo las TRES parejas formateadas.`;

            // Ejemplos finales con la estructura simple deseada
            const ejemplos = [
                "Pregunta: ¬øDe qu√© me morir√©?\nRespuesta: Te pillar√° un tren lleno de cerdos en Tailandia.",
                
                "Pregunta: ¬øCon qui√©n me casar√©?\nRespuesta: Con el Inspector Gadget.",
                
                "Pregunta: ¬øCu√°l es la clave para la felicidad?\nRespuesta: Tienes que hacer mermelada de ruedas de coche.",
                
                "Pregunta: ¬øCu√°l ser√° mi pr√≥xima gran compra?\nRespuesta: Un pl√°tano gigante.",
                
                "Pregunta: ¬øC√≥mo conseguir√© un ascenso?\nRespuesta: Debes sobornar a tu jefe con un peine de oro.",
                
                "Pregunta: ¬øQu√© me depara el futuro?\nRespuesta: Te encontrar√°s un beb√© escondido dentro de una sandwichera."
            ];

            const instruccionFinal = "Genera TRES NUEVOS pares originales de Pregunta y Respuesta que sigan este formato estricto y simple.";

            return `${contexto}\n\n--- EJEMPLOS ---\n${ejemplos.join('\n\n')}\n\n--- GENERACI√ìN ---\n${instruccionFinal}`;
        }

        // Funci√≥n principal para llamar a la API
        async function generarPredicciones() {
            const resultadoDiv = document.getElementById('resultado');
            resultadoDiv.innerHTML = '<span class="cargando">Adivinando el futuro absurdo...</span>';
            
            const prompt = construirPromptPitonisa();
            
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{ role: "user", parts: [{ text: prompt }] }],
                        generationConfig: { 
                            temperature: 0.9, 
                            maxOutputTokens: 2048, 
                        }
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({error: {message: 'Respuesta de error no es JSON'}}));
                    throw new Error(`Error ${response.status}: ${errorData.error ? errorData.error.message : response.statusText}`);
                }

                const data = await response.json();
                
                // --- EXTRACCI√ìN Y LIMPIEZA DEL TEXTO ---
                let textoGenerado = "No se pudo generar el contenido. Vuelve a intentarlo o revisa el diagn√≥stico de la API.";

                try {
                    textoGenerado = data.candidates[0].content.parts[0].text.trim();
                } catch (e) {
                    // Si falla (por contenido vac√≠o o safety block)
                }
                // ----------------------------------------------------

                // Muestra el resultado final
                resultadoDiv.innerHTML = `
                    <pre>${textoGenerado}</pre>
                `;

            } catch (error) {
                // Manejo de ERRORES CR√çTICOS
                resultadoDiv.innerHTML = `
                    <strong style="color: #c53929;">Error cr√≠tico al conectar con la API:</strong> ${error.message}.<br><br>
                    <strong>POSIBLES CAUSAS:</strong><br>
                    - Clave API incorrecta o expirada.<br>
                    - Falta de cr√©ditos o restricci√≥n de uso.<br>
                    - El modelo no est√° disponible o el nombre es incorrecto.
                `;
            }
        }
    </script>


<hr style="margin-top: 40px; border-color: #ccc;">
    <div style="text-align: center; margin-top: 20px; padding-bottom: 20px;">
        <a href="index.html" style="
            text-decoration: none;
            color: #5f6368;
            font-weight: bold;
            padding: 10px 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: background-color 0.3s;
        ">
            ‚Üê Volver al Men√∫ Principal
        </a>
    </div>

</body>
</html>