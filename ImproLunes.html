<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impro CientoCinco 10¬π¬π</title>
    <style>
body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    text-align: center;
    padding: 20px;
    margin: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

h1 { color: #333; font-size: 2rem; }

/* Clase para organizar los controles, esencial para m√≥vil */
.controls-container {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap; 
    max-width: 90%;
}

button {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 12px 20px;
    font-size: 1rem;
    cursor: pointer;
    margin: 10px 5px;
    border-radius: 8px;
    min-width: 100px;
}

button:hover { background: #45a049; }

/* Bot√≥n de Reinicio con color distintivo */
button[onclick="reiniciarSorteo()"] {
    background: #007bff; /* Azul para reiniciar */
}
button[onclick="reiniciarSorteo()"]:hover {
    background: #0056b3;
}


.result {
    margin-top: 25px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    padding: 20px;
    font-size: 1.2rem;
    line-height: 1.6;
    max-width: 95%;
    word-wrap: break-word;
    margin-left: auto;
    margin-right: auto;
    text-align: left; 
}

/* Estilo de la categor√≠a (t√≠tulo) */
.category { 
    font-weight: bold; 
    color: #444; 
    margin-right: 5px; /* Espacio despu√©s de los dos puntos */
}

select {
    padding: 8px;
    font-size: 1rem;
    margin-right: 10px;
}

/* Estilo para los selects dentro del modal */
#modalContent select {
    width: 100%;
    margin-bottom: 20px;
    padding: 10px;
    box-sizing: border-box;
}

/* Modal ausentes */
#modalAusentes {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.7); 
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    padding: 10px;
}

#modalContent {
    background: white;
    padding: 20px;
    border-radius: 10px;
    max-height: 90vh; 
    overflow-y: auto;
    text-align: left;
    max-width: 480px;
    width: 95%; 
}

#modalContent h2 { margin-top: 0; }
#listaAusentes label { 
    display:block; 
    margin:8px 0; 
    font-size: 16px; 
    cursor: pointer;
}
#listaAusentes input[type="checkbox"] {
    transform: scale(1.3); 
    margin-right: 10px;
}
div > label[for="numParticipantes"] {
    font-size: 1rem;
    margin-right: 10px;
    margin-bottom: 5px; 
}


/* ----------------------------------------------- */
/* ESTILOS DEL BOT√ìN DE REGENERACI√ìN */
/* ----------------------------------------------- */

.regenerate-btn {
    background: none; 
    color: #4CAF50; 
    border: none;
    padding: 0 4px; 
    margin-right: 8px;
    font-size: 1.1rem; 
    cursor: pointer;
    line-height: 1; 
    transition: color 0.1s;
    
    flex-shrink: 0; 
    align-self: flex-start;
}

.regenerate-btn:hover {
    color: #007bff; 
    text-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
}

/* Alineaci√≥n de los p√°rrafos del resultado (SOLUCI√ìN RESPONSIVE) */
#resultado-content p {
    display: flex;
    flex-wrap: wrap; 
    align-items: baseline; 
    padding-right: 5px; 
}

/* ----------------------------------------------- */

/* Media queries para m√≥viles */
@media (max-width: 600px) {
    body { padding: 10px; }
    h1 { font-size: 1.8rem; }
    p { font-size: 1rem; }
    
    .controls-container {
        flex-direction: column;
        width: 100%;
    }

    div > label[for="numParticipantes"] {
        display: block;
        margin-right: 0;
        text-align: center;
        width: 100%;
    }

    select {
        font-size: 1.1rem;
        padding: 12px 10px; 
        margin: 5px 0 15px 0;
        width: 80%;
        max-width: 260px;
    }
    
    button {
        font-size: 1.1rem;
        padding: 14px 20px;
        margin: 8px 0;
        min-width: 140px;
        width: 80%; 
        max-width: 260px;
    }
    
    .result { 
        font-size: 1.1rem; 
        padding: 20px; 
        max-width: 95%; 
        width: auto;
    }
    
    #modalContent { 
        width: 90%; 
        max-width: 400px;
    }
}
    </style>
</head>
<body>

<div class="controls-container">
    <h1>üé≤ Impro CientoCinco 10¬π¬π</h1>
    <p></p>
</div>

<div class="controls-container">
    <label for="numParticipantes">¬øParticipantes?</label>
    <select id="numParticipantes"></select>
    <button onclick="generar()">Generar</button>
    
    <button onclick="reiniciarSorteo()">Reiniciar Sorteo</button> 
    
    </div>

<div class="result" id="resultado">
    Haz clic en el bot√≥n para empezar
</div>

<div id="modalAusentes" aria-hidden="true">
    <div id="modalContent" role="dialog" aria-modal="true" aria-label="Seleccionar clase y ausentes">
        
        <label for="selectClase">¬øDe qu√© clase se trata?</label>
        <select id="selectClase" onchange="actualizarListaAlumnos()"></select>
        
        <h2>Selecciona los ausentes de hoy</h2>
        <div id="listaAusentes"></div>
        
        <div style="text-align:right; margin-top:10px;">
            <button onclick="confirmarAusentes(true)" style="background:#f44336; margin-right: 10px;">Cerrar (Todos Presentes)</button>
            <button onclick="confirmarAusentes()">Confirmar Ausentes</button>
        </div>
    </div>
</div>

<script>
// ====================================================================================
// 1. DATOS DIN√ÅMICOS POR CLASE (MODIFICADOS PARA INCLUIR NIVEL: Nombre|Nivel)
// ====================================================================================

const ALUMNOS_POR_CLASE = {
    "Lunes": [
        "Alba|0", "Andrea|1", "Beatriz|1", "Beatriz Law|1", "Elena|1", "Estela|1",
        "Jes√∫s|0", "Luc√≠a|0", "Mar√≠a|0", "Marta|1", "Mery|1", "Patricia|1",
        "Raquel|0", "Victoria|0", "Yolanda|1"
    ],
    "Martes": ["Ainhoa|0", "AnaG|0", "Daniel|1", "Javier|1", "Judith|1", "Laura|1", 
        "Marcos|1", "Marta|1", "Maite|1", "Nerea|1", "Pablo|1", "Samira|1", 
        "Sof√≠a|1"],
    "Mi√©rcoles": ["Bea|0", "Chuchi|0", "Elenita|1", "Esther|1", "Isa|1", "Isra|1", 
        "Mar√≠a|1", "Natalia|1", "Paloma|1", "Yesi|1"],
    "Jueves 5": ["Alex|0", "David|0", "Elena|1", "F√©lix|1", "Fuen|1", "Gema|1", 
        "H√©ctor|1", "Irene|1", "Sara|1"],
    "Jueves 7": ["√Ångeles|0", "Aroa|0", "Beloki|1", "Elena|1", "Jes√∫s|1", "Mar√≠a|1", 
        "Paula|1", "Pilar|1", "Ra√∫l|1", "Rosa|1", "Virgi|1"],
    "Viernes": ["Rub√©n|0", "Luc√≠a|0", "Guillermo|1", "Marina|1", "√Ålvaro|1", "Cristina|1", "Jorge|1", "Silvia|1"]
};

let ausentesSeleccionados = []; // Alumnos marcados como ausentes por el usuario
let alumnosBase = []; // Lista completa de la clase seleccionada (con nivel)
let alumnosRestantes = []; // Lista de alumnos disponibles para el sorteo (con nivel)
let alumnosPresentesEnClase = []; // Lista de alumnos presentes al iniciar la tanda (con nivel)

// ====================================================================================
// 2. CONSTANTES E INICIALIZACI√ìN
// ====================================================================================

const selectNum = document.getElementById("numParticipantes");
const modalAusentes = document.getElementById("modalAusentes");
const listaAusentesDiv = document.getElementById("listaAusentes");
const selectClase = document.getElementById("selectClase");
const btnGenerar = document.querySelector('button[onclick="generar()"]');
let lastSelected = 1;


const lugares = `Parque de atracciones,Desierto,R√≠o,Estaci√≥n orbital,Mercado callejero`.split(",");
const personajes = `Abeja,Abogado,Acrobata,Actor,Adivino`.split(",");
const objetos = `Silla,Proyector,Bolsa,Esp√°tula,Maquinilla de afeitar`.split(",");
const objetosRaros = `Reloj que camina,Cadena que baila,Pluma que dibuja sola,Peine que silba,Pepino que flota`.split(",");
const formatos = `Acci√≥n,Ciencia ficci√≥n,Cine familiar,Cine mudo,Comedia`.split(",");
const sentimientos = `Abatimiento,Aburrimiento,Admiraci√≥n,Afecto,Agobio`.split(",");


// ---------------------------------------------------------------------------------------------------------------------------------------------
// 3. FUNCIONES PRINCIPALES
// ---------------------------------------------------------------------------------------------------------------------------------------------

    // Helper para manejar el formato "Nombre|Nivel"
    function parsearAlumno(alumnoConNivel) {
        const parts = alumnoConNivel.split('|');
        return {
            nombre: parts[0].trim(),
            nivel: parts.length > 1 ? parseInt(parts[1], 10) : 1 // 0=Nuevo, 1=Estandar/Veterano
        };
    }

    function azar(lista) {
      return lista[Math.floor(Math.random() * lista.length)];
    }

    function poblarSelect() {
      if (alumnosRestantes.length === 0) {
        selectNum.innerHTML = '<option value="0">0 (sin alumnos)</option>';
        selectNum.disabled = true;
        btnGenerar.disabled = true;
        return;
      }
      const max = alumnosRestantes.length;
      selectNum.innerHTML = "";
      for (let i = 1; i <= max; i++) {
        const opt = document.createElement("option");
        opt.value = i;
        opt.textContent = i;
        selectNum.appendChild(opt);
      }
      const want = (typeof lastSelected === "number" && lastSelected >= 1) ? Math.min(lastSelected, max) : 1;
      selectNum.value = want;
      selectNum.disabled = false;
      btnGenerar.disabled = false;
    }
    
    function poblarSelectClases() {
        selectClase.innerHTML = "";
        const clases = Object.keys(ALUMNOS_POR_CLASE);
        clases.forEach(clase => {
            const opt = document.createElement("option");
            opt.value = clase;
            opt.textContent = clase;
            selectClase.appendChild(opt);
        });
        // Intenta cargar la √∫ltima clase seleccionada si existe
        const lastClass = localStorage.getItem('lastClass') || clases[0];
        selectClase.value = lastClass;
    }
    
    function actualizarListaAlumnos() {
        const claseSeleccionada = selectClase.value;
        localStorage.setItem('lastClass', claseSeleccionada);
        alumnosBase = ALUMNOS_POR_CLASE[claseSeleccionada] || [];
        
        listaAusentesDiv.innerHTML = "";
        if (alumnosBase.length === 0) {
            listaAusentesDiv.innerHTML = "<p>No hay alumnos definidos para esta clase.</p>";
            return;
        }

        alumnosBase.forEach(alumnoConNivel => {
            const { nombre } = parsearAlumno(alumnoConNivel); // Extraer solo el nombre para el checkbox
            const label = document.createElement("label");
            const cb = document.createElement("input");
            cb.type = "checkbox";
            cb.value = nombre;
            
            // Marca los ausentes previamente seleccionados para esta clase
            if(ausentesSeleccionados.includes(nombre)) {
                cb.checked = true;
            }

            label.appendChild(cb);
            label.appendChild(document.createTextNode(" " + nombre));
            listaAusentesDiv.appendChild(label);
        });
    }

    function mostrarModalAusentes() {
      poblarSelectClases();
      actualizarListaAlumnos(); 
      
      modalAusentes.style.display = "flex";
      modalAusentes.setAttribute("aria-hidden", "false");
      selectNum.innerHTML = '<option>--</option>';
      selectNum.disabled = true;
      btnGenerar.disabled = true;
    }

    function confirmarAusentes(todosPresentes = false) {
      if (alumnosBase.length === 0) {
          alert("Por favor, selecciona una clase v√°lida.");
          return;
      }
      
      if (todosPresentes) {
        ausentesSeleccionados = [];
      } else {
        const checks = Array.from(listaAusentesDiv.querySelectorAll("input[type=checkbox]"));
        ausentesSeleccionados = checks.filter(c => c.checked).map(c => c.value);
      }

      alumnosRestantes = alumnosBase.filter(alumnoConNivel => {
          const { nombre } = parsearAlumno(alumnoConNivel);
          return !ausentesSeleccionados.includes(nombre);
      });
      
      alumnosPresentesEnClase = [...alumnosRestantes]; 
      
      modalAusentes.style.display = "none";
      modalAusentes.setAttribute("aria-hidden", "true");
      lastSelected = 1;
      poblarSelect();
      document.getElementById("resultado").innerHTML = `Clase: ${selectClase.value}. ¬°Listo para generar!`;
      if (alumnosRestantes.length === 0) {
        document.getElementById("resultado").innerHTML = `<p style="color:crimson;">No hay alumnos presentes en la clase ${selectClase.value}.</p>`;
      }
    }

  function generar() {
      if (selectNum.disabled || alumnosRestantes.length === 0) return;
      
      const num = parseInt(selectNum.value, 10);
      if (isNaN(num) || num < 1 || num > alumnosRestantes.length) {
        const max = alumnosRestantes.length;
        if (num === 0 || max === 0) return;
        
        // Ajusta el sorteo al m√°ximo disponible si el n√∫mero solicitado es mayor
        lastSelected = max;
        selectNum.value = max;
        // La variable 'num' seguir√° siendo la original (ej: 2), pero la l√≥gica de spotsToFill lo gestionar√°
      }
      
      lastSelected = num;
      
      const participantes = []; 
      let alumnosSorteadosConNivel = []; // Lista temporal para rastrear los alumnos sorteados (cadenas con nivel)

      // 1. Clonar el pool de alumnos restantes: esta ser√° la √öNICA lista que modificaremos.
      let poolSorteable = [...alumnosRestantes]; 
      let spotsToFill = num;
      let avisoNuevos = "";
  
      const esPrimerSorteo = alumnosRestantes.length === alumnosPresentesEnClase.length;
      
      // Predicados de filtrado
      const isVeteran = (a) => parsearAlumno(a).nivel !== 0;
      const isAnyone = () => true;


      // ---------------------------------------------------------------------------
      // NUEVA FUNCI√ìN HELPER: Selecciona un alumno (filtrado por criterio) y lo elimina
      // del poolSorteable, a la vez que actualiza el resultado y los spots restantes.
      // ---------------------------------------------------------------------------
      const seleccionarYRemover = (filterFn) => {
          // 1. Aplicar el filtro para encontrar candidatos v√°lidos en el pool actual
          const candidatos = poolSorteable.filter(filterFn);
          if (candidatos.length === 0) return null; // No se decrementa spotsToFill si falla

          // 2. Elegir uno al azar de los candidatos
          const alumno = azar(candidatos);
          
          // 3. Eliminarlo del poolSorteable principal
          const idxInPool = poolSorteable.findIndex(a => parsearAlumno(a).nombre === parsearAlumno(alumno).nombre);
          if (idxInPool > -1) {
              poolSorteable.splice(idxInPool, 1); // Lo elimina del pool principal
          }
          
          // 4. Actualizar el resultado y el contador
          alumnosSorteadosConNivel.push(alumno);
          spotsToFill--;
          return alumno;
      };

      // ---------------------------------------------------------------------------
      // L√ìGICA DE SORTEO
      // ---------------------------------------------------------------------------

      if (esPrimerSorteo) {
          // PRIMER SORTEO (Regla: Solo veteranos si es posible)
          
          const veteranosRestantes = poolSorteable.filter(isVeteran);
          const numVeteranos = veteranosRestantes.length;
          
          const numVeteranosAReunir = Math.min(spotsToFill, numVeteranos);
          
          for(let i=0; i < numVeteranosAReunir; i++) {
             seleccionarYRemover(isVeteran); 
          }
          
          while (spotsToFill > 0 && poolSorteable.length > 0) {
              // Rellenamos el resto con lo que quede (novatos)
              seleccionarYRemover(isAnyone); 
          }
          
      } else {
          // SORTEOS POSTERIORES (Desde el segundo sorteo en adelante)
          
          if (num === 1) {
              // REGLA 1 (num=1, posterior): Aleatorio.
              while (spotsToFill > 0 && poolSorteable.length > 0) {
                  seleccionarYRemover(isAnyone);
              }

          } 
          // Caso 2: Parejas (num=2). Regla: M√°ximo un novato.
          // ¬°L√ìGICA CORREGIDA! 
          else if (num === 2) {
              
              // 1. Intentamos garantizar al menos un veterano (si hay disponibles).
              // Si no lo hay, spotsToFill no se decrementa (sigue en 2).
              seleccionarYRemover(isVeteran); 
              
              // 2. Rellenar los spots restantes (hasta que spotsToFill = 0)
              // Esto asegura que se completen los 2 cupos incluso si el paso 1 fall√≥ (quedan 3 novatos).
              while (spotsToFill > 0 && poolSorteable.length > 0) {
                  seleccionarYRemover(isAnyone); 
              }

          } 
          // Caso 3: Tr√≠os o m√°s (num >= 3). Regla: M√≠nimo un veterano.
          // ¬°L√ìGICA CORREGIDA! 
          else if (num >= 3) {
              
              // 1. Garantizar al menos un veterano (si hay disponibles)
              seleccionarYRemover(isVeteran);
              
              // 2. Rellenar el resto de los spots (completamente al azar)
              // Esto asegura que el resto de los cupos se llenen.
              while (spotsToFill > 0 && poolSorteable.length > 0) {
                  seleccionarYRemover(isAnyone);
              }
          }
      } // Fin de Sorteos Posteriores
      
      // ---------------------------------------------------------------------------
      // 4. Post-Sorteo: Mover los alumnos sorteados a la lista final y actualizar alumnosRestantes
      // ---------------------------------------------------------------------------
      
      // Convertir alumnosConNivel a solo nombres para el resultado final
      alumnosSorteadosConNivel.forEach(alumnoConNivel => {
          participantes.push(parsearAlumno(alumnoConNivel).nombre);
      });
      
      // CLAVE: alumnosRestantes es lo que qued√≥ en el 'poolSorteable'
      alumnosRestantes = poolSorteable; 
      
      // Actualizar la lista de participantes disponibles en el select
      poblarSelect();
      
      // >>> GENERACI√ìN DE IDEAS (L√ìGICA DE PERSONAJES M√öLTIPLES) <<<
      const lugar = azar(lugares);
      
      const numParticipantes = participantes.length;
      const numPersonajesAdicionales = numParticipantes > 1 ? numParticipantes - 1 : 0;
      
      let personajePrincipal = azar(personajes);
      let personajesExtras = [];
      
      let personajesDisponibles = [...personajes].filter(p => p !== personajePrincipal); 
      
      for (let i = 0; i < numPersonajesAdicionales; i++) {
          const idx = Math.floor(Math.random() * personajesDisponibles.length);
          personajesExtras.push(personajesDisponibles.splice(idx, 1)[0]); 
      }
      
      let personajeResultado = personajePrincipal;
      if (personajesExtras.length > 0) {
          personajeResultado += ` (${personajesExtras.join(", ")})`;
      }
      // <<< FIN DE GENERACI√ìN DE IDEAS
      
      const objeto = azar(objetos);
      const objetoRaro = azar(objetosRaros);
      const formato = azar(formatos);
      const sentimiento = azar(sentimientos);

      let aviso = "";
      if (alumnosRestantes.length === 0) {
        aviso = `<div style="color:crimson; font-weight:bold; text-align:center; margin-top:10px;">
                    No quedan participantes. Pulsa "Reiniciar Sorteo" para volver a empezar.
                  </div>`;
      }
      
      const avisoParticipantes = avisoNuevos ? `<span style="font-size:0.9em; color:#0056b3; font-weight:bold; margin-left:10px;">${avisoNuevos}</span>` : '';

      // >>> SECCI√ìN MODIFICADA PARA A√ëADIR LOS BOTONES DE REGENERACI√ìN <<<
      const btn = (categoria) => 
        `<button class="regenerate-btn" onclick="regenerarCategoria('${categoria}')" title="Generar solo ${categoria}">üîÑ</button>`;

      document.getElementById("resultado").innerHTML = `
        <div id="resultado-content">
          <p><span class="category">CLASE:</span> ${selectClase.value}</p>
          <p><span class="category">üë• Participantes: </span> ${participantes.join(", ")}${avisoParticipantes}</p>
          <p id="lugar">${btn('lugar')}<span class="category">üåç Lugar: </span> ${lugar}</p>
          <p id="personaje">${btn('personaje')}<span class="category">üë§ Personaje: </span> ${personajeResultado}</p>
          <p id="objeto">${btn('objeto')}<span class="category">üì¶ Objeto: </span> ${objeto}</p>
          <p id="objetoRaro">${btn('objetoRaro')}<span class="category">‚ú® Objeto raro: </span> ${objetoRaro}</p>
          <p id="formato">${btn('formato')}<span class="category">üé¨ Formato: </span> ${formato}</p>
          <p id="sentimiento">${btn('sentimiento')}<span class="category">üí≠ Sentimiento: </span> ${sentimiento}</p>
        </div>
        ${aviso}
      `;
    }
    
    // Funci√≥n de Reiniciar Sorteo (mantiene la clase y los ausentes fijos)
    function reiniciarSorteo() {
      alumnosBase = ALUMNOS_POR_CLASE[selectClase.value] || [];
      alumnosRestantes = alumnosBase.filter(alumnoConNivel => {
          const { nombre } = parsearAlumno(alumnoConNivel);
          return !ausentesSeleccionados.includes(nombre);
      });
      
      alumnosPresentesEnClase = [...alumnosRestantes];
      
      lastSelected = 1;
      poblarSelect();
      document.getElementById("resultado").innerHTML = `Sorteo de ${selectClase.value} reiniciado. ¬°A elegir de nuevo!`;
      if (alumnosRestantes.length === 0) {
        document.getElementById("resultado").innerHTML = `<p style="color:crimson;">No hay alumnos presentes en la clase ${selectClase.value}.</p>`;
      }
    }

// Funci√≥n para regenerar una categor√≠a espec√≠fica (lugar, personaje, etc.)
    function regenerarCategoria(categoria) {
        const elemento = document.getElementById(categoria);
        let nuevoValor = "";
        let prefijo = "";
        let lista = [];

        switch (categoria) {
            case 'lugar': lista = lugares; prefijo = 'üåç Lugar:'; break;
            case 'personaje': lista = personajes; prefijo = 'üë§ Personaje:'; break;
            case 'objeto': lista = objetos; prefijo = 'üì¶ Objeto:'; break;
            case 'objetoRaro': lista = objetosRaros; prefijo = '‚ú® Objeto raro:'; break;
            case 'formato': lista = formatos; prefijo = 'üé¨ Formato:'; break;
            case 'sentimiento': lista = sentimientos; prefijo = 'üí≠ Sentimiento:'; break;
            default: return; 
        }

        const btn = (cat) => 
            `<button class="regenerate-btn" onclick="regenerarCategoria('${cat}')" title="Generar solo ${cat}">üîÑ</button>`;
        
        if (categoria === 'personaje') {
            
            const participantesParrafo = document.querySelector('#resultado-content p:nth-child(2)');
            if (!participantesParrafo) return; 

            const participantesTexto = participantesParrafo.textContent.split(':').pop().trim().replace(/\s*\(.*\)$/, '');
            
            const numParticipantes = participantesTexto ? participantesTexto.split(',').length : 1;
            const numPersonajesAdicionales = numParticipantes > 1 ? numParticipantes - 1 : 0;
            
            let personajePrincipal = azar(personajes);
            let personajesExtras = [];
            
            let personajesDisponibles = [...personajes].filter(p => p !== personajePrincipal); 
            
            for (let i = 0; i < numPersonajesAdicionales; i++) {
                const idx = Math.floor(Math.random() * personajesDisponibles.length);
                personajesExtras.push(personajesDisponibles.splice(idx, 1)[0]); 
            }
            
            nuevoValor = personajePrincipal;
            if (personajesExtras.length > 0) {
                nuevoValor += ` (${personajesExtras.join(", ")})`;
            }

        } else {
            nuevoValor = azar(lista);
        }
        
        elemento.innerHTML = `${btn(categoria)}<span class="category">${prefijo}</span> ${nuevoValor}`;
    }

    // 4. LISTENERS E INICIALIZACI√ìN
    
    selectNum.addEventListener('change', () => {
      const v = parseInt(selectNum.value, 10);
      if (!isNaN(v)) lastSelected = v;
    });

    // Llamar a mostrarModalAusentes() directamente al cargar la ventana
    window.addEventListener('load', () => {
      mostrarModalAusentes();
    });
</script>


<hr style="margin-top: 40px; border-color: #ccc;">
    <div style="text-align: center; margin-top: 20px; padding-bottom: 20px;">
        <a href="index.html" style="
            text-decoration: none;
            color: #5f6368;
            font-weight: bold;
            padding: 10px 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: background-color 0.3s;
        ">
            ‚Üê Volver al Men√∫ Principal
        </a>
    </div>

</body>
</html>